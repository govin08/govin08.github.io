---
layout: single
title: "(A1) Riemann integral"
categories: mathematics
tags: [analysis, Riemann integral, Riemann]
use_math: true
publish: false
author_profile: false
toc: true
---

Stein 책에는 리만적분에 대한 내용이 Appendix의 첫 장으로 되어 있다.
본문의 2장은 리만적분을 가정하고 진행하고 있으므로 이에 대해 정리해보았다.

가장 먼저는, 리만적분에 관한 기본적인 사실들을 인터넷으로 찾아보다가, nontrivial한 사실인 적분가능한 두 함수의 곱이 적분가능하다는 사실을 증명해보려고 하다가, baby rudin의 6장을 다시 읽어보게 되었다.
baby rudin은 Stieltjies 적분까지 포함한 논의를 하고 있어서 좀 복잡하지만, 그래도 찬찬히 읽어보니 필요한 내용을 다 정리할 수 있겠다 싶었다.
그런데 Stein의 2장을 계속 읽다보니 해당 책의 Appendix의 1장 (이상 Stein A1)에 해당 내용이 정리되어있다는 걸 보고 거길 읽어보았다.
Stein A1이 훨씬 간결하게, 꼭 필요한 내용들만 있는데다가, 기본적으로 Rudin 책의 내용과 거의 비슷하기 때문에, Stein A1을 정리하려고 한다.

<!-- <div class="notice--info" markdown="1"> -->
<!-- <div class="notice--success" markdown="1"> -->
<!-- <a href="#" class="btn btn--primary">proof</a> -->
<!-- <a href="#" class="btn btn--primary">QED</a> -->

# Appendix 1. Riemann Integral

<div class="notice--info" markdown="1">
<br><br>
</div>

Let $f:[a,b]\to\mathbb R$ be bounded.
A *partition* of $[a,b]$ is a sequence $(x_0,x_1,\cdots,x_{N-1},x_N)$ where

$$a=x_0\lt x_1\lt\cdots\lt x_{N-1}\lt x_N=b.$$

The upper sum $\mathcal U(f,P)$ and lower sum $\mathcal L(f,P)$ of $f$ with respect to $P$ are

$$
\begin{aligned}
\mathcal U(f,P)
&=\sum_{j=1}^N\sup\{f(x):x_{j-1}\le x\le x_j\}(x_j-x_{j-1})\\
\mathcal L(f,P)
&=\sum_{j=1}^N\inf\{f(x):x_{j-1}\le x\le x_j\}(x_j-x_{j-1})\\
\end{aligned}
$$

All the supremums and infimums exist since $f$ is bounded.
It is immediate that $\mathcal U(f,P)\ge\mathcal L(f,P)$.

<div class="notice--success" markdown="1">
<b> Definition </b>

$f$ is said to be *(Riemann) integrable* if for every $\epsilon\gt0$, there exists $P$ such that

$$(\mathcal U-\mathcal L)(f,P)\lt\epsilon.$$

</div>

If another partition $P'$ of $[a,b]$ is a subset of $P$ where we conceive $P$ and $P'$ as sets, then $P'$ is called a *refinement* of $P$.
It is clear that

<div class="notice--success" markdown="1">
<b> Proposition </b>

if $P'$ is a refinement of $P$, then $\mathcal U(f,P')\le\mathcal U(f,P)$ and $\mathcal L(f,P')\ge\mathcal L(f,P)$.

</div>

<a href="#" class="btn btn--primary">proof</a>
To sketch the proof of it, let $P=(a,b)$ and $P'=(a,c,b)$ are two partition of $[a,b]$.
Then,

$$
\begin{aligned}
\mathcal U(f,P')
&=\sup\{f(x):a\le x\le c\}(c-a) + \sup\{f(x):c\le x\le b\}(b-c)\\
&\le\sup\{f(x):a\le x\le b\}(c-a) + \sup\{f(x):a\le x\le b\}(b-c)\\
&=\sup\{f(x):a\le x\le b\}(b-a)\\
&=\mathcal U(f,P)
\end{aligned}
$$

Similarly, $\mathcal L(f,P')\ge\mathcal L(f,P)$ holds for the same $P$ and $P'$.
<a href="#" class="btn btn--primary">QED</a>

Let

$$U=\inf_P\,\mathcal U(f,P),\quad L=\sup_P\,\mathcal L(f,P).$$

Such $U$ and $L$ always exist since $f$ is bounded.
Moreover,

<div class="notice--success" markdown="1">
<b> Proposition </b>

$f$ is integrable if and only if $U=L$.

</div>

<a href="#" class="btn btn--primary">proof</a>
Suppose the former.
It is trivial that $U\ge L$.
Fix $\epsilon\gt0$.
Since $f$ is integrable, there exists a partition $P$ such that

$$\mathcal U(f,P)-\mathcal L(f,P)\lt\epsilon$$

Then

$$
\begin{aligned}
U-L
&=\inf_P\,\mathcal U(f,P)-\sup_P\,\mathcal L(f,P)\\
&\le\mathcal U(f,P)-\mathcal L(f,P)\\
&\lt\epsilon
\end{aligned}
$$

Since $\epsilon$ was arbitrary, $U-L\le0$.

Suppose the latter and fix $\epsilon\gt0$.
There exist $P_1$ and $P_2$ such that

$$
\begin{aligned}
\mathcal U(f,P_1) - U\lt\frac\epsilon2\\
L - \mathcal L(f,P_2)\lt\frac\epsilon2
\end{aligned}
$$

Let $P$ be the common refinement of $P_1$ and $P_2$, the enumeration of the intersection of $P_1$ and $P_2$ as sets.
Then

$$
\begin{aligned}
\mathcal U(f,P) - \mathcal L(f,P)
&\le\mathcal U(f,P_1) - \mathcal L(f,P_2)\\
&\lt U-L+\epsilon\\
&=\epsilon.
\end{aligned}
$$

Thus $f$ is integrable as desired.
<a href="#" class="btn btn--primary">QED</a>

<div class="notice--success" markdown="1">
<b> Definition </b>

If $f$ is integrable so that $U=L$, define

$$\int_a^bf(x)\,dx=U=L$$

</div>

For brevity, we somtimes write $\int_a^bf\,dx$ or $\int f$ instead.
For complex functions, we have the following definitions

<div class="notice--success" markdown="1">
<b> Definition </b>

$f:[a,b]\to\mathbb C$ is such that $f=u+iv$, then $f$ is integrable on $[a,b]$ if both of $u$ and $v$ are integrable on $[a,b]$ and

$$\int_a^bf(x)\,dx=\int_a^bu(x)\,dx+i\int_a^bv(x)\,dx$$

</div>

It is a fundamental fact that

<div class="notice--success" markdown="1">
<b> Proposition </b>

if $f$ is continuous on $[a,b]$, then $f$ is integrable.

</div>

<a href="#" class="btn btn--primary">proof</a>
Suppose that $f$ is real valued.
Since $[a,b]$ is compact (closed and bounded), $f$ is uniformly continuous on this interval.
That is, for each $\epsilon\gt0$, there exists $\delta\gt0$ such that

$$|x-y|\lt\delta\quad\Longrightarrow\quad |f(x)-f(y)|\lt\frac\epsilon{b-a}.$$

Choose $n$ so that $\frac{b-a}n\lt\delta$ and let

$$P=\left(a, a+\frac{b-a}n, a+2\frac{b-a}n, \cdots, a+(n-1)\frac{b-a}n,b\right).$$

Then

$$
\begin{aligned}
(\mathcal U - \mathcal L)(f, P)
&=\sum_{j=1}^N\left(
    \sup\{f(x):x_{j-1}\le x\le x_j\}
    -
    \inf\{f(x):x_{j-1}\le x\le x_j\}
    \right)\frac{b-a}n\\
&=\sum_{j=1}^N\epsilon\frac{b-a}n\\
&=\frac\epsilon{b-a}\cdot(b-a)=\epsilon.
\end{aligned}
$$

Suppose now that $f$ is complex valued so that $f=u+iv$.
Since $f$ is continuous, it is trivial that $u$ and $v$ are also continuous.
It follows that $u$ and $v$ are both integrable and that $f$ is integrable.
<a href="#" class="btn btn--primary">QED</a>


## A1.1 Basic properties

<div class="notice--info" markdown="1">
책에는 Proposition 1.1에 주요 성질들이 적혀있고 여기에 $f$와 $g$가 적분가능하면 $f+g$와 $cf$가 적분가능하다는 게 나오고 있고, 그 이후에 Lemma 1.2로 연속함수의 합성에 의한 효과가 언급되고 그 직후에 $fg$, $|f|$도 적분가능하다는 사실이 언급되고 있다.
그런데 $fg$, $|f|$가 적분가능하다는 사실은 $f+g$, $cf$가 적분가능하다는 사실만큼이나 중요하다고 생각되고 lemma의 증명에 proposition의 결과가 필요해보이지 않아서 lemma를 앞으로 빼고 proposition을 뒤로 넣었다.
Rudin의 책에도 이 순서로 되어 있다.
그리고 lemma, proposition 등의 넘버링은 원래 1.1, 1.2 등으로 되어 있었지만 이 포스트에서는 Appendix 1의 내용만 쓸 것이므로 1, 2 등으로 썼다.

lemma 1.1의 Stein 증명이 잘 이해가 안가서 Rudin의 증명을 더 많이 봤는데, 기본적으로 두 증명이 거의 같다.
notation은 두 증명을 적당히 조합해서 썼다.
증명은, $\phi\circ f$에 대한 upper-lower limit의 차가 $\epsilon$의 배수보다 적어짐을 보이기 위하는 것이 목적이다.
$\phi$의 uniform continuity로부터 $\delta$를, $f$의 적분가능성으로부터 $P$를 얻어내고, 각 subinterval에 대하여 $f$의 최댓값 $M_j$과 최솟값 $m_j$의 차이가 $\delta$와 비교했을 때 큰지($j\in A$) 작은지($j\in B$)로 나누어 생각한다.
만약 $j\in A$이면 $\phi\circ f$의 최댓값 $M^\ast_j$과 최솟값 $m^\ast_j$의 차이가 $\epsilon$의 상수배보다 적어져서 쉽게 해결된다.
만약 $j\in B$이면 $M_j-m_j\ge\delta$라는 사실로부터 $\sum_{j\in B}(x_j-x_{j-1})$가 $\epsilon$의 상수배보다 적다는 것을 $P$의 construction으로부터 얻어내어 해결한다.
둘을 조합하면 증명이 완성된다.
</div>

<div class="notice--success" markdown="1">
<b> Lemma 1 </b>

Suppose that $f:[a,b]\to\mathbb R$ is integrable and that $\phi:\mathbb R\to\mathbb R$ is continuous.
Then, $\phi\circ f:[a,b]\to\mathbb R$ is integrable.
</div>

<!-- ![lemma_f]({{site.url}}\images\2024-10-25-Fourier_A1\lemma_f.png){: .img-50-center} -->

<div style="display: flex; justify-content: center; gap: 10px;">
    <img src="{{site.url}}/images/2024-10-25-Fourier_A1/lemma_f.png" style="width: 40%;" />
    <img src="{{site.url}}/images/2024-10-25-Fourier_A1/lemma_phi.png" style="width: 40%;" />
</div>

<a href="#" class="btn btn--primary">proof</a>
Since $f$ is bounded, $m\le f\le M$ on $[a,b]$ for some real $m$ and $M$.
Since $\phi$ is continuous, its range on $[m,M]$ is bounded ; $\lvert\phi\rvert\le K$ on $[m,M]$ for some $K\ge0$.
Fix $\epsilon\gt0$.
Since $\phi$ is uniformly continuous on $[m,M]$, there exists $\delta\gt0$ such that $\delta\lt\epsilon$ and

$$
m\le s,t\le M,\quad |s-t|\lt\delta\quad\Longrightarrow\quad\lvert\phi(s)-\phi(t)\rvert\lt\epsilon.
\tag{1-1}
$$

Since $f$ is integrable, there exists a partition $P=(x_0,x_1,\cdots,x_N)$ of $[a,b]$ so that

$$
\mathcal U(f, P)-\mathcal L(f, P)\lt\delta^2.
\tag{1-2}
$$

For each $j$, denote

$$
\begin{aligned}
M_j&=\sup_{x_{j-1}\le x\le x_j}f(x)&m_j&=\inf_{x_{j-1}\le x\le x_j}f(x)\\
M^\ast_j&=\sup_{x_{j-1}\le x\le x_j}\phi\circ f(x)&m^\ast_j&=\inf_{x_{j-1}\le x\le x_j}\phi\circ f(x).
\end{aligned}
$$

These values exist since $f$ is bounded and $\phi$ is continuous.
Then, by (1-2),

$$
\sum_{j=1}^N(M_j-m_j)(x_j-x_{j-1})\lt\delta^2
\tag{1-3}
$$

Let $A=\\{j:M_j-m_j\lt\delta\\}$ and $B=\\{j:M_j-m_j\ge\delta\\}$.
If $j\in A$, then $M^\ast_j-m^\ast_j\le\epsilon$ by (1-1).
If $j\in B$, then we can use (1-3) to get

$$
\sum_{j\in B}(x_j-x_{j-1})\lt\delta
$$

and we also have $\lvert M^\ast_j-m^\ast_j\rvert\le 2K$.
Therefore,

$$
\begin{aligned}
\mathcal U(\phi\circ f, P)-\mathcal L(\phi\circ f, P)
&=\sum_{j=1}^N(M^\ast_j-m^\ast_j)(x_j-x_{j-1})\\
&=\sum_{j\in A}(M^\ast_j-m^\ast_j)(x_j-x_{j-1})+\sum_{j\in B}(M^\ast_j-m^\ast_j)(x_j-x_{j-1})\\
&\le\epsilon\sum_{j\in A}(x_j-x_{j-1})+2K\sum_{j\in B}(x_j-x_{j-1})\\
&\le\epsilon\sum_{j=1}^\infty(x_j-x_{j-1})+2K\delta\\
&\le\epsilon\left[(b-a)+2K\right]
\end{aligned}
$$

Since $\epsilon$ was arbitrary, $\phi\circ f$ is integrable.
<a href="#" class="btn btn--primary">QED</a>

<div class="notice--success" markdown="1">
<b> Proposition 2 </b>

Suppose that $f$ and $g$ are integrable function on $[a,b]$.
Then

<ol class="parenthesis">
  <li>
  $f+g$ is integrable and $\int_a^b(f+g)\,dx=\int_a^bf\,dx+\int_a^bg\,dx$.
  </li>
  <li>
  If $c$ is a constant, then $cf$ is integrable and $\int_a^bcf\,dx=c\int_a^bf\,dx$.
  </li>
  <li>
  If $f$ and $g$ are both real valued and if $f\le g$, then $\int_a^bcf\,dx\le\int_a^bg\,dx$.
  </li>
  <li>
  If $a\le c\le b$, then $\int_a^bf\,dx=\int_a^cf\,dx+\int_c^bf\,dx$.
  </li>
  <li>
  $fg$ is integrable.
  </li>
  <li>
  $\lvert f\rvert$ is integrable and $\lvert\int_a^b f\,dx\rvert\le \int_a^b\lvert f\rvert\,dx$.
  </li>
</ol>

</div>

<a href="#" class="btn btn--primary">proof - a</a>

Suppose first that $f$ and $g$ are real valued.
Fix $\epsilon\gt0$.
Since $f$ and $g$ are integrable, there exist $P_1$ and $P_2$ such that

$$
\begin{align*}
(\mathcal U-\mathcal L)(f,P_1)&\lt\frac\epsilon2\\
(\mathcal U-\mathcal L)(g,P_2)&\lt\frac\epsilon2
\end{align*}
$$

Take $P=P_1\cap P_2=(x_0,x_1,\cdots,x_N)$.
Since $P$ is finer than $P_1$ and $P_2$,

$$
\begin{align*}
(\mathcal U-\mathcal L)(f,P)&\lt\frac\epsilon2\\
(\mathcal U-\mathcal L)(g,P)&\lt\frac\epsilon2
\tag{2-1}
\end{align*}
$$

Thus,

$$
\begin{align*}
(\mathcal U-\mathcal L)(f+g,P)
&=\sum_{j=1}^N\left(
    \sup_{x_{j-1}\le x\le x_j}\left(f(x)+g(x)\right)
    -
    \inf_{x_{j-1}\le x\le x_j}\left(f(x)+g(x)\right)
\right)\\
&\le\sum_{j=1}^N\left(
    \sup_{x_{j-1}\le x\le x_j}f(x)+\sup_{x_{j-1}\le x\le x_j}g(x)
    -
    \inf_{x_{j-1}\le x\le x_j}f(x)-\inf_{x_{j-1}\le x\le x_j}g(x)
\right)\\
&=\sum_{j=1}^N\left(
    \sup_{x_{j-1}\le x\le x_j}f(x)
    -
    \inf_{x_{j-1}\le x\le x_j}f(x)
\right)
+\sum_{j=1}^N\left(
    \sup_{x_{j-1}\le x\le x_j}g(x)
    -
    \inf_{x_{j-1}\le x\le x_j}g(x)
\right)\\
&=(\mathcal U-\mathcal L)(f,P)+(\mathcal U-\mathcal L)(g,P)\\
&\lt\epsilon
\end{align*}
$$

Thus $f+g$ is integrable.

With the same $P$, we can use (2-1) again to get

$$
\mathcal U(f,P)\le\mathcal U(f,P)-\mathcal L(f,P)+\int f\,dx\lt\int f\,dx+\frac\epsilon2.
$$

Similarly,

$$
\mathcal U(g,P)\lt\int g\,dx+\frac\epsilon2.
$$

By the subadditivity of the supremum,

$$
\begin{aligned}
\int f+g
&\le\mathcal U(f+g,P)\\
&\le\mathcal U(f,P)+\mathcal U(g,P)\\
&\lt\int f+\int g+\epsilon.
\end{aligned}
$$

Since $\epsilon$ was arbitrary, $\int f+g\le\int f+\int g.$
Similarly, $\int f+g\ge\int f+\int g$ and thus

$$
\int f+g=\int f+\int g.
$$

Now suppos that $f$ and $g$ are complex valued so that $f=f_R+if_I$ and $g=g_R+ig_I$.
If $f$ and $g$ are both integrable, $f_R$, $f_I$, $g_R$ and $g_I$ are all integrable.
It follows that $f_R+g_R$ and $f_I+g_I$ are both integrable and that

$$f+g=(f_R+g_R)+i(f_I+g_I)$$

is integrable.
Moreover

$$
\begin{align*}
\int f+g
&=\int (f_R+g_R)+i(f_I+g_I)\\
&=\int (f_R+g_R)+i\int(f_I+g_I)\\
&=\int f_R+i\int f_I+\int g_R+i\int g_I\\
&=\int f+\int g
\end{align*}
$$

<a href="#" class="btn btn--primary">proof - b</a>

$$
\begin{aligned}
\int_a^bcf(x)\,dx
&=\inf_P\,\mathcal U(cf,P)\\
&=\inf_P\,\sum_{j=1}^N\sup_{x_{j-1}\le x\le x_j}cf(x)(x_j-x_{j-1})\\
&=c\inf_P\,\sum_{j=1}^N\sup_{x_{j-1}\le x\le x_j}f(x)(x_j-x_{j-1})\\
&=c\inf_P\,\mathcal U(f,P)\\
&=c\int_a^bf(x)\,dx.
\end{aligned}
$$

<a href="#" class="btn btn--primary">proof - c</a>

$$
\begin{aligned}
\int_a^bf(x)\,dx
&=\inf_P\,\mathcal U(f,P)\\
&=\inf_P\,\sum_{j=1}^N\sup_{x_{j-1}\le x\le x_j}f(x)(x_j-x_{j-1})\\
&\le\inf_P\,\sum_{j=1}^N\sup_{x_{j-1}\le x\le x_j}g(x)(x_j-x_{j-1})\\
&=\inf_P\,\mathcal U(g,P)\\
&=\int_a^bg(x)\,dx
\end{aligned}
$$
